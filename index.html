<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DB News Mobile Studio</title>
    <style>
        :root {
            --red: #d32f2f;
            --dark: #0a0a0a;
            --panel: #1a1a1a;
            --text: #fff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            background: var(--dark);
            color: var(--text);
            font-family: sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* No scrollbars */
            display: flex;
            flex-direction: column;
        }

        /* --- Compact Header --- */
        header {
            height: 40px;
            background: #222;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            border-bottom: 2px solid var(--red);
            flex-shrink: 0;
        }
        .logo { font-weight: 900; letter-spacing: -1px; font-size: 1.2rem; }
        .logo span { background: var(--red); padding: 2px 6px; border-radius: 3px; margin-right: 2px; }
        .clock { font-family: monospace; color: #fbc02d; font-weight: bold; }

        /* --- Main Layout (Landscape Optimized) --- */
        .main {
            display: flex;
            flex: 1;
            height: calc(100% - 70px); /* Adjust for header & ticker */
        }

        /* Column 1: Playlist (Left) */
        .col-playlist {
            width: 25%;
            background: #111;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }
        .playlist-header {
            padding: 8px;
            background: #333;
            font-size: 0.8rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }
        .playlist-content {
            flex: 1;
            overflow-y: auto;
        }
        .item {
            padding: 8px;
            border-bottom: 1px solid #222;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .item.active { background: #4a1010; border-left: 3px solid var(--red); }
        .item-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 80%; }
        .btn-del { background: none; border: none; color: #666; font-weight: bold; cursor: pointer; }
        .btn-del:hover { color: var(--red); }
        
        .btn-add {
            background: #222; color: #aaa;
            border: 1px dashed #555;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            text-align: center;
            font-size: 0.8rem;
        }

        /* Column 2: Monitors (Center - Priority) */
        .col-monitors {
            width: 50%;
            display: flex;
            flex-direction: column;
            padding: 5px;
            background: #000;
            position: relative;
        }
        
        /* PGM Monitor (Main View) */
        .pgm-container {
            flex: 1;
            position: relative;
            border: 2px solid var(--red);
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        video { width: 100%; height: 100%; object-fit: contain; }

        /* Overlays */
        .live-badge {
            position: absolute; top: 10px; right: 10px;
            background: var(--red); color: white;
            padding: 2px 6px; font-size: 0.7rem; font-weight: bold;
            animation: blink 1s infinite; display: none;
        }
        .lower-third {
            position: absolute; bottom: 10%; left: 5%; width: 90%;
            display: none;
        }
        .lt-head { background: linear-gradient(90deg, #b71c1c, #d32f2f); padding: 5px 10px; font-weight: bold; font-size: 1rem; text-transform: uppercase; display: inline-block; }
        .lt-sub { background: rgba(255,255,255,0.9); color: black; padding: 2px 10px; font-weight: bold; font-size: 0.8rem; display: block; width: fit-content; }

        /* Column 3: Controls (Right) */
        .col-controls {
            width: 25%;
            background: #161616;
            border-left: 1px solid #333;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Buttons */
        .btn {
            width: 100%; padding: 10px; border: none; border-radius: 4px;
            font-weight: bold; cursor: pointer; color: white;
        }
        .btn-take { background: var(--red); font-size: 1.2rem; height: 50px; }
        .btn-take:active { background: #b71c1c; }
        .btn-gfx { background: #444; font-size: 0.8rem; }
        .btn-gfx.active { background: #2e7d32; }

        /* Inputs */
        input[type="text"] {
            width: 100%; background: #222; border: 1px solid #444;
            color: white; padding: 5px; margin-bottom: 5px; font-size: 0.8rem;
        }
        label { font-size: 0.7rem; color: #888; }

        /* --- Ticker Footer --- */
        .ticker-area {
            height: 30px;
            background: var(--red);
            display: flex;
            align-items: center;
            overflow: hidden;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .ticker-title { background: black; color: #fbc02d; padding: 0 10px; height: 100%; display: flex; align-items: center; font-weight: bold; font-size: 0.8rem; z-index: 2; }
        .ticker-text {
            padding-left: 100%;
            display: inline-block;
            animation: scroll 15s linear infinite;
            font-weight: bold; font-size: 0.9rem;
        }

        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* Mobile Landscape Adjustments */
        @media screen and (max-height: 450px) {
            header { height: 30px; }
            .ticker-area { height: 25px; font-size: 0.8rem; }
            .logo { font-size: 1rem; }
            .col-controls { overflow-y: auto; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo"><span>DB</span> NEWS</div>
        <div class="clock" id="clock">00:00</div>
    </header>

    <div class="main">
        <div class="col-playlist">
            <div class="playlist-header">
                <span>RUNORDER</span>
                <span id="item-count">0 Items</span>
            </div>
            <div class="playlist-content" id="playlist-container">
                </div>
            <input type="file" id="videoInput" accept="video/*" style="display: none;" multiple>
            <div class="btn-add" onclick="document.getElementById('videoInput').click()">+ ADD VIDEO (Mobile/PC)</div>
        </div>

        <div class="col-monitors">
            <div class="pgm-container">
                <div class="live-badge" id="live-badge">LIVE</div>
                
                <video id="main-player" poster="https://via.placeholder.com/640x360/000000/ffffff?text=DB+NEWS+SYSTEM"></video>
                
                <div class="lower-third" id="gfx-layer">
                    <div class="lt-head" id="gfx-head">HEADLINE HERE</div>
                    <div class="lt-sub" id="gfx-sub">Location / Sub-headline</div>
                </div>
            </div>
        </div>

        <div class="col-controls">
            <button class="btn btn-take" onclick="takeNext()">TAKE (PLAY)</button>
            
            <hr style="border-color: #333; margin: 5px 0;">
            
            <label>Headline (CG)</label>
            <input type="text" id="inp-head" value="BREAKING NEWS">
            
            <label>Sub Text</label>
            <input type="text" id="inp-sub" value="Live Coverage">
            
            <div style="display:flex; gap:5px;">
                <button class="btn btn-gfx" onclick="updateGfxText()">UPDATE</button>
                <button class="btn btn-gfx" id="btn-toggle-gfx" onclick="toggleGfx()">SHOW CG</button>
            </div>

            <div style="margin-top: auto;">
                <button class="btn" style="background:#333; font-size:0.7rem;" onclick="stopPlayer()">STOP / BLACK</button>
            </div>
        </div>
    </div>

    <div class="ticker-area">
        <div class="ticker-title">NEWS UPDATE</div>
        <div class="ticker-text" id="ticker-content">WELCOME TO DB NEWS MOBILE SYSTEM - ADD VIDEOS TO START BROADCASTING...</div>
    </div>

    <script>
        // --- System State ---
        let playlist = [];
        let currentIndex = -1;
        const player = document.getElementById('main-player');

        // 1. Clock
        setInterval(() => {
            const d = new Date();
            document.getElementById('clock').innerText = d.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
        }, 1000);

        // 2. Add Video Logic
        document.getElementById('videoInput').addEventListener('change', function(e) {
            const files = e.target.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const url = URL.createObjectURL(file);
                
                playlist.push({
                    id: Date.now() + i,
                    title: file.name,
                    url: url
                });
            }
            renderPlaylist();
        });

        // 3. Render Playlist
        function renderPlaylist() {
            const container = document.getElementById('playlist-container');
            container.innerHTML = '';
            document.getElementById('item-count').innerText = playlist.length + " Items";

            playlist.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = `item ${index === currentIndex ? 'active' : ''}`;
                div.onclick = () => { currentIndex = index - 1; takeNext(); }; // Click to play instantly
                
                div.innerHTML = `
                    <div class="item-title">${index + 1}. ${item.title}</div>
                    <button class="btn-del" onclick="removeItem(event, ${index})">Ã—</button>
                `;
                container.appendChild(div);
            });
        }

        // 4. Remove Item
        function removeItem(e, index) {
            e.stopPropagation(); // Prevent playing when deleting
            playlist.splice(index, 1);
            if (currentIndex >= index) currentIndex--; 
            renderPlaylist();
        }

        // 5. TAKE / Play Logic
        function takeNext() {
            if (currentIndex < playlist.length - 1) {
                currentIndex++;
                const item = playlist[currentIndex];
                
                // Change Video Source
                player.src = item.url;
                player.play();
                
                // Update UI
                renderPlaylist();
                document.getElementById('live-badge').style.display = 'block';
                
                // Auto-hide Live badge if video ends
                player.onended = () => {
                    // Optional: Auto play next?
                    // takeNext(); 
                    document.getElementById('live-badge').style.display = 'none';
                };
            }
        }

        function stopPlayer() {
            player.pause();
            player.src = "";
            document.getElementById('live-badge').style.display = 'none';
        }

        // 6. Graphics Logic
        let gfxShown = false;
        function toggleGfx() {
            const layer = document.getElementById('gfx-layer');
            const btn = document.getElementById('btn-toggle-gfx');
            
            if (!gfxShown) {
                layer.style.display = 'block';
                btn.classList.add('active');
                gfxShown = true;
            } else {
                layer.style.display = 'none';
                btn.classList.remove('active');
                gfxShown = false;
            }
        }

        function updateGfxText() {
            document.getElementById('gfx-head').innerText = document.getElementById('inp-head').value;
            document.getElementById('gfx-sub').innerText = document.getElementById('inp-sub').value;
        }

    </script>
</body>
</html>
